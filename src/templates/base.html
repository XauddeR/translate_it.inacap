<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Translate It{% endblock %}</title>
  <meta name="description" content="Translate It — Transcribe & Translate con IA" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'ui-sans-serif', 'system-ui', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial']
          },
          colors: {
            brand: {
              50: '#EFF6FF',
              100: '#DBEAFE',
              200: '#BFDBFE',
              300: '#93C5FD',
              400: '#60A5FA',
              500: '#3B82F6',
              600: '#2563EB',
              700: '#1D4ED8',
              800: '#1E40AF',
              900: '#1E3A8A'
            }
          },
          boxShadow: {
            glow: '0 0 0 3px rgba(59,130,246,.25), 0 10px 40px rgba(37,99,235,.35)'
          }
        }
      }
    }
  </script>
  {% block head %}{% endblock %}
</head>

<body class="bg-slate-950 text-slate-100 font-sans antialiased min-h-screen flex flex-col">
  <div class="pointer-events-none fixed inset-0 -z-10">
    <div
      class="absolute -top-40 left-1/2 -translate-x-1/2 w-[1200px] h-[1200px] rounded-full blur-3xl opacity-40"
      style="background: radial-gradient(closest-side, rgba(37,99,235,.45), rgba(29,78,216,.25), transparent 70%);">
    </div>
  </div>

  <header class="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-slate-900/60">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4 sm:px-6 py-3">
      <a href="{{ url_for('main.index') if 'main.index' in request.url_rule.endpoint else '/' }}" class="flex items-center gap-2">
        <span class="text-lg sm:text-xl font-extrabold tracking-tight">Translate It</span>
      </a>

      <nav class="hidden md:flex items-center gap-6 text-sm">
        {% block header_links %}{% endblock %}
        <a href="{{ url_for('main.index') }}" class="text-slate-200 hover:text-white">Inicio</a>

        {% if current_user.is_admin == True %}
          <a href="{{ url_for('admin.admin_dashboard') }}" class="text-brand-300 hover:text-white font-semibold">Panel Admin</a>
        {% endif %}

        {% if current_user.is_authenticated %}
          <a href="{{ url_for('main.dashboard') }}" class="text-slate-200 hover:text-white">Panel de Usuario</a>
          <a href="{{ url_for('auth.logout') }}" class="text-rose-300 hover:text-rose-200 font-semibold">Cerrar sesión</a>
        {% else %}
          <a href="{{ url_for('auth.login') }}" class="text-slate-200 hover:text-white">Iniciar sesión</a>
          <a href="{{ url_for('auth.register') }}" class="inline-flex items-center px-4 py-2 rounded-lg bg-brand-600 hover:bg-brand-500 text-white font-semibold shadow-glow">Registrarse</a>
        {% endif %}
      </nav>

      <button
        id="menuBtn"
        class="md:hidden inline-flex h-10 w-10 items-center justify-center rounded-lg bg-white/5 ring-1 ring-white/10 hover:bg-white/10 transition"
        aria-label="Abrir menú"
        aria-controls="mobileNav"
        aria-expanded="false">
        <svg
          id="menuArrow"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          class="h-5 w-5 transition-transform duration-300 ease-out text-white"
          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 6l6 6-6 6" />
        </svg>
      </button>
    </div>
  </header>

  <div
    id="mobileNav"
    role="dialog"
    aria-modal="true"
    class="md:hidden fixed inset-0 z-[70] hidden bg-slate-950/90 backdrop-blur-sm">
    <div class="absolute right-0 top-0 h-full w-80 max-w-[85%] bg-slate-950 border-l border-white/10 p-6 space-y-6 shadow-2xl">
      <div class="flex items-center justify-between">
        <span class="font-bold text-lg">Menú</span>
      </div>

      <nav class="flex flex-col text-base gap-4">
        {% block header_links_mobile %}{% endblock %}
        <a href="{{ url_for('main.index') }}" class="text-slate-200 hover:text-white">Inicio</a>
        <a href="{{ url_for('main.dashboard') if current_user.is_authenticated else url_for('auth.login') }}" class="text-slate-200 hover:text-white">Panel de Usuario</a>

        {% if current_user.is_admin == True %}
          <a href="{{ url_for('admin.admin_dashboard') }}" class="text-brand-300 hover:text-white font-semibold">Panel Admin</a>
        {% endif %}

        <div class="h-px bg-white/10 my-2"></div>

        {% if current_user.is_authenticated %}
          <a href="{{ url_for('auth.logout') }}" class="text-rose-300 hover:text-rose-200 font-semibold">Cerrar sesión</a>
        {% else %}
          <a href="{{ url_for('auth.login') }}" class="text-slate-200 hover:text-white">Iniciar sesión</a>
          <a href="{{ url_for('auth.register') }}" class="inline-flex items-center justify-center px-4 py-2 rounded-lg bg-brand-600 hover:bg-brand-500 text-white font-semibold shadow-glow">Registrarse</a>
        {% endif %}
      </nav>
    </div>
  </div>

  <main class="flex-1">
    {% block content %}{% endblock %}
  </main>

  <footer class="border-t border-white/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-10 text-center md:text-left md:flex md:items-center md:justify-between">
      <p class="text-sm text-slate-400">&copy; {{ 2025 }} Translate It. Todos los derechos reservados.</p>
      <div class="mt-4 md:mt-0 flex items-center justify-center gap-5 text-sm">
        <a href="#" class="text-slate-400 hover:text-slate-200">Términos</a>
        <a href="#" class="text-slate-400 hover:text-slate-200">Privacidad</a>
      </div>
    </div>
  </footer>

  <script>
    const btn = document.getElementById('menuBtn');
    const arrow = document.getElementById('menuArrow');
    const drawer = document.getElementById('mobileNav');
    const htmlEl = document.documentElement;
    const bodyEl = document.body;

    const open = () => {
      drawer.classList.remove('hidden');
      arrow.classList.add('rotate-90');
      btn.setAttribute('aria-expanded', 'true');
      htmlEl.classList.add('overflow-hidden');
      bodyEl.classList.add('overflow-hidden', 'touch-none');
      drawer.removeAttribute('aria-hidden');
    };

    const close = () => {
      drawer.classList.add('hidden');
      arrow.classList.remove('rotate-90');
      btn.setAttribute('aria-expanded', 'false');
      htmlEl.classList.remove('overflow-hidden');
      bodyEl.classList.remove('overflow-hidden', 'touch-none');
      drawer.setAttribute('aria-hidden', 'true');
    };

    btn?.addEventListener('click', () => {
      if (drawer.classList.contains('hidden')) open();
      else close();
    });

    // Cerrar al hacer click fuera del panel (en el overlay oscuro)
    drawer?.addEventListener('click', (e) => {
      if (e.target === drawer) close();
    });

    // Cerrar con Escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !drawer.classList.contains('hidden')) close();
    });
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>
